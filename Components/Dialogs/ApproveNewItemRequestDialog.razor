@using MudBlazor

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6" Class="mb-2">Approve Item Request</MudText>

        <MudTextField @bind-Value="_name"
                      Label="Name"
                      Variant="Variant.Outlined"
                      Required="true"
                      Immediate="true" />
    </DialogContent>

    <DialogActions>
        <MudButton Variant="Variant.Text" Color="Color.Secondary" OnClick="Cancel">
            Cancel
        </MudButton>

        <MudButton Variant="Variant.Filled"
                   Color="Color.Success"
                   Disabled="@string.IsNullOrWhiteSpace(_name)"
                   OnClick="Approve">
            Approve
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] private IMudDialogInstance? MudDialog { get; set; }

    [Parameter] public string? CurrentName { get; set; }

    private string _name = "";

    protected override void OnInitialized()
        => _name = CurrentName ?? "";

    private void Cancel()
        => MudDialog?.Close(DialogResult.Cancel());

    private void Approve()
        => MudDialog?.Close(DialogResult.Ok(_name.Trim()));
}
