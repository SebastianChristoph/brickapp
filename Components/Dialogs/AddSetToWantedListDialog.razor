@using brickapp.Data.DTOs
@using brickapp.Data.Services

@inject WantedListService WantedListService
@inject NotificationService NotificationService
@inject LoadingService LoadingService

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6" GutterBottom="true">Add set to wanted list</MudText>

        @if (_loadingLists)
        {
            <MudProgressCircular Indeterminate="true" />
        }
        else
        {
            <MudStack Spacing="2">
                <MudSelect T="int?" Label="Add to existing wanted list" Variant="Variant.Outlined"
                           @bind-Value="_selectedWantedListId" Disabled="_saving">
                    <MudSelectItem T="int?" Value="null">-- select --</MudSelectItem>
                    @foreach (var wl in _wantedLists)
                    {
                        <MudSelectItem T="int?" Value="@wl.Id">@wl.Name</MudSelectItem>
                    }
                </MudSelect>

                <MudDivider />

                <MudTextField Label="Or create a new wanted list" Variant="Variant.Outlined"
                              @bind-Value="_newListName" Disabled="_saving" />

                @if (!string.IsNullOrWhiteSpace(_error))
                {
                    <MudAlert Severity="Severity.Error">@_error</MudAlert>
                }
            </MudStack>
        }
    </DialogContent>

    <DialogActions>
        <MudButton OnClick="Cancel"  Color="Color.Secondary" Disabled="_saving">Cancel</MudButton>
        <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="Save" Disabled="@(_saving || _loadingLists)">
            Add to Wanted List
        </MudButton>
    </DialogActions>
</MudDialog>

@code {

    // Parameter aus SetDetails

}
